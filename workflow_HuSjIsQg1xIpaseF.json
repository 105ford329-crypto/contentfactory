{"updatedAt":"2025-12-26T14:47:00.154Z","createdAt":"2025-12-24T14:19:37.959Z","id":"HuSjIsQg1xIpaseF","name":"Workflow 3 - AI Video Montage (Templates + HeyGen + Ideogram + Expert Clips)","description":null,"active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"render-video","options":{}},"name":"Webhook Trigger","type":"n8n-nodes-base.webhook","typeVersion":2,"position":[0,0],"webhookId":"render-video","id":"webhook-trigger"},{"parameters":{"documentId":{"__rl":true,"value":"={{ $env.GOOGLE_SHEET_ID }}","mode":"id"},"sheetName":{"__rl":true,"value":"Очередь_контента","mode":"name"},"options":{}},"name":"Get Content Queue","type":"n8n-nodes-base.googleSheets","typeVersion":4.4,"position":[220,0],"id":"get-content-queue","credentials":{"googleSheetsOAuth2Api":{"id":"VYgLH1nyxvDHNqbF","name":"Google Sheets Main link"}}},{"parameters":{"documentId":{"__rl":true,"value":"={{ $env.GOOGLE_SHEET_ID }}","mode":"id"},"sheetName":{"__rl":true,"value":"AI_Templates","mode":"name"},"options":{}},"name":"Get AI Templates","type":"n8n-nodes-base.googleSheets","typeVersion":4.4,"position":[220,200],"id":"get-ai-templates","credentials":{"googleSheetsOAuth2Api":{"id":"VYgLH1nyxvDHNqbF","name":"Google Sheets Main link"}}},{"parameters":{"jsCode":"// Select content ready for video generation\nconst contentItems = $input.all();\nconst webhookData = $('Webhook Trigger').first()?.json?.body;\n\n// If triggered by webhook with specific content_id\nif (webhookData?.content_id) {\n  const item = contentItems.find(i => i.json.id === webhookData.content_id);\n  if (item) {\n    return [{ json: { ...item.json, chat_id: webhookData.chat_id } }];\n  }\n  return [];\n}\n\n// Otherwise, get items with status = ready_for_video\nreturn contentItems\n  .filter(i => i.json.status === 'ready_for_video')\n  .slice(0, 3)\n  .map(i => ({ json: i.json }));"},"name":"Filter Ready Content","type":"n8n-nodes-base.code","typeVersion":2,"position":[440,0],"id":"filter-ready-content"},{"parameters":{"jsCode":"// Select appropriate AI template based on content topic\nconst content = $('Filter Ready Content').first().json;\nconst templates = $input.all();\n\n// Try to match template by topic\nconst contentTopic = content.topic || content.category || 'general';\nconst matchedTemplate = templates.find(t => \n  t.json.topic?.toLowerCase().includes(contentTopic.toLowerCase())\n) || templates[0]; // fallback to first template\n\nif (!matchedTemplate) {\n  throw new Error('No AI templates available. Please run WF13 first.');\n}\n\nreturn {\n  ...content,\n  selected_template_id: matchedTemplate.json.template_id,\n  scenario_name: matchedTemplate.json.scenario_name,\n  template_colors: matchedTemplate.json.colors,\n  template_fonts: matchedTemplate.json.fonts,\n  template_animation: matchedTemplate.json.animation,\n  supports_heygen: matchedTemplate.json.supports_heygen === 'TRUE',\n  supports_broll: matchedTemplate.json.supports_broll === 'TRUE',\n  supports_expert: matchedTemplate.json.supports_expert === 'TRUE'\n};"},"name":"Select Template","type":"n8n-nodes-base.code","typeVersion":2,"position":[660,0],"id":"select-template"},{"parameters":{"model":"claude-3-5-sonnet-20241022","text":"=Создай тексты для 10 слайдов видео на основе этого контента:\n\nТема: {{ $json.topic || 'общая' }}\nОсновная идея: {{ $json.hook || $json.title }}\nКонтент: {{ $json.body || $json.description }}\nCTA: {{ $json.cta || 'Подписывайся!' }}\n\nВизуальный стиль: {{ $json.scenario_name }}\nАнимация: {{ $json.template_animation }}\n\nТребования:\n- 10 слайдов по 3-5 секунд каждый\n- Каждый слайд: короткий текст (max 100 символов) + описание для генерации изображения\n- Слайды должны раскрывать тему последовательно\n- Стиль: {{ $json.scenario_name }}\n- Последний слайд = CTA\n\nВЕР��И ТОЛЬКО JSON:\n{\n  \"slides\": [\n    {\n      \"text\": \"текст слайда\",\n      \"image_prompt\": \"промпт для Ideogram\",\n      \"duration\": 4\n    },\n    ...\n  ],\n  \"total_duration\": 40\n}","options":{}},"name":"Generate Slide Content (Claude)","type":"@n8n/n8n-nodes-langchain.lmChatAnthropic","typeVersion":1,"position":[880,0],"id":"generate-content-claude"},{"parameters":{"jsCode":"// Parse Claude response and prepare for image generation\nconst response = $input.first().json;\nlet slides;\n\ntry {\n  const match = response.response?.match(/\\{[\\s\\S]*\\}/);\n  const parsed = JSON.parse(match ? match[0] : response.response);\n  slides = parsed.slides;\n} catch (e) {\n  throw new Error('Failed to parse Claude response: ' + e.message);\n}\n\nif (!slides || slides.length !== 10) {\n  throw new Error('Claude must return exactly 10 slides');\n}\n\nconst prevData = $('Select Template').first().json;\n\n// Create separate items for each image to generate\nreturn slides.map((slide, idx) => ({\n  json: {\n    ...prevData,\n    slide_index: idx + 1,\n    slide_text: slide.text,\n    slide_duration: slide.duration,\n    image_prompt: slide.image_prompt,\n    all_slides: JSON.stringify(slides)\n  }\n}));"},"name":"Parse Slides","type":"n8n-nodes-base.code","typeVersion":2,"position":[1100,0],"id":"parse-slides"},{"parameters":{"method":"POST","url":"https://api.ideogram.ai/generate","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"image_request\": {\n    \"prompt\": \"{{ $json.image_prompt }}, professional high-quality, {{ $json.scenario_name }} style, vibrant colors, 16:9 aspect ratio, no text\",\n    \"aspect_ratio\": \"ASPECT_16_9\",\n    \"model\": \"V_2\",\n    \"magic_prompt_option\": \"AUTO\"\n  }\n}","options":{}},"name":"Generate Slide Images (Ideogram)","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1320,0],"id":"generate-images-ideogram","credentials":{"httpHeaderAuth":{"id":"rrCVfNeSKnGe0r0G","name":"Ideogram API"}}},{"parameters":{"jsCode":"// Collect all generated images\nconst items = $input.all();\n\n// Extract image URLs\nconst images = items\n  .sort((a, b) => a.json.slide_index - b.json.slide_index)\n  .map(item => {\n    const ideogramResponse = item.json;\n    return ideogramResponse.data?.[0]?.url || '';\n  });\n\nif (images.length !== 10) {\n  throw new Error(`Expected 10 images, got ${images.length}`);\n}\n\n// Get slide texts\nconst firstItem = items[0].json;\nconst allSlides = JSON.parse(firstItem.all_slides);\n\nreturn {\n  ...firstItem,\n  image_1: images[0],\n  image_2: images[1],\n  image_3: images[2],\n  image_4: images[3],\n  image_5: images[4],\n  image_6: images[5],\n  image_7: images[6],\n  image_8: images[7],\n  image_9: images[8],\n  image_10: images[9],\n  text_1: allSlides[0].text,\n  text_2: allSlides[1].text,\n  text_3: allSlides[2].text,\n  text_4: allSlides[3].text,\n  text_5: allSlides[4].text,\n  text_6: allSlides[5].text,\n  text_7: allSlides[6].text,\n  text_8: allSlides[7].text,\n  text_9: allSlides[8].text,\n  text_10: allSlides[9].text\n};"},"name":"Combine Images","type":"n8n-nodes-base.code","typeVersion":2,"position":[1540,0],"id":"combine-images"},{"parameters":{"method":"POST","url":"https://api.heygen.com/v2/video/generate","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"video_inputs\": [{\n    \"character\": {\n      \"type\": \"avatar\",\n      \"avatar_id\": \"{{ $env.HEYGEN_AVATAR_ID }}\",\n      \"avatar_style\": \"normal\"\n    },\n    \"voice\": {\n      \"type\": \"text\",\n      \"input_text\": \"{{ $json.hook }} {{ $json.body?.slice(0, 500) }}\",\n      \"voice_id\": \"{{ $env.HEYGEN_VOICE_ID }}\"\n    }\n  }],\n  \"dimension\": {\n    \"width\": 1080,\n    \"height\": 1920\n  },\n  \"aspect_ratio\": \"9:16\"\n}","options":{}},"name":"Generate HeyGen Avatar","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1760,0],"id":"generate-heygen"},{"parameters":{"operation":"list","folderId":{"__rl":true,"value":"={{ $env.GOOGLE_DRIVE_BROLL_FOLDER || '' }}","mode":"id"},"options":{"fields":["id","name","mimeType"]}},"name":"Get B-Roll Files","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1760,200],"id":"get-broll-files"},{"parameters":{"operation":"list","folderId":{"__rl":true,"value":"={{ $env.GOOGLE_DRIVE_AUDIO_FOLDER || '' }}","mode":"id"},"options":{"fields":["id","name","mimeType"]}},"name":"Get Audio Files","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1760,400],"id":"get-audio-files"},{"parameters":{"documentId":{"__rl":true,"value":"={{ $env.GOOGLE_SHEET_ID }}","mode":"id"},"sheetName":{"__rl":true,"value":"Expert_Clips","mode":"name"},"options":{}},"name":"Get Expert Clips","type":"n8n-nodes-base.googleSheets","typeVersion":4.4,"position":[1760,600],"id":"get-expert-clips","credentials":{"googleSheetsOAuth2Api":{"id":"VYgLH1nyxvDHNqbF","name":"Google Sheets Main link"}}},{"parameters":{"amount":60},"name":"Wait for HeyGen","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[1980,0],"webhookId":"heygen-wait","id":"wait-heygen"},{"parameters":{"url":"=https://api.heygen.com/v1/video_status.get?video_id={{ $('Generate HeyGen Avatar').first().json.data?.video_id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"name":"Check HeyGen Status","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2200,0],"id":"check-heygen-status"},{"parameters":{"jsCode":"// Prepare render data - combine all assets\nconst contentData = $('Combine Images').first().json;\nconst brollFiles = $('Get B-Roll Files').all().map(f => f.json);\nconst audioFiles = $('Get Audio Files').all().map(f => f.json);\nconst expertClips = $('Get Expert Clips').all().map(f => f.json);\nconst heygenResult = $('Check HeyGen Status').first().json;\n\n// Randomly select 4 B-Roll videos\nconst selectedBroll = brollFiles\n  .filter(f => f.mimeType?.includes('video'))\n  .sort(() => Math.random() - 0.5)\n  .slice(0, 4);\n\n// Randomly select audio\nconst audioFile = audioFiles\n  .filter(f => f.mimeType?.includes('audio'))\n  .sort(() => Math.random() - 0.5)[0];\n\n// Select expert clip if available and template supports it\nconst expertClip = (contentData.supports_expert && expertClips.length > 0) \n  ? expertClips\n      .filter(c => c.topic === contentData.topic || c.type === 'general')\n      .sort(() => Math.random() - 0.5)[0]\n  : null;\n\nreturn {\n  ...contentData,\n  avatar_video_url: heygenResult.data?.video_url || '',\n  broll_1: selectedBroll[0] ? `https://drive.google.com/uc?id=${selectedBroll[0].id}&export=download` : '',\n  broll_2: selectedBroll[1] ? `https://drive.google.com/uc?id=${selectedBroll[1].id}&export=download` : '',\n  broll_3: selectedBroll[2] ? `https://drive.google.com/uc?id=${selectedBroll[2].id}&export=download` : '',\n  broll_4: selectedBroll[3] ? `https://drive.google.com/uc?id=${selectedBroll[3].id}&export=download` : '',\n  audio_url: audioFile ? `https://drive.google.com/uc?id=${audioFile.id}&export=download` : '',\n  expert_video_url: expertClip ? `https://drive.google.com/uc?id=${expertClip.drive_file_id}&export=download` : '',\n  chat_id: $('Filter Ready Content').first().json.chat_id || $env.TELEGRAM_CHAT_ID\n};"},"name":"Prepare Render Data","type":"n8n-nodes-base.code","typeVersion":2,"position":[2420,0],"id":"prepare-render-data"},{"parameters":{"method":"POST","url":"https://api.creatomate.com/v1/renders","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"template_id\": \"{{ $json.selected_template_id }}\",\n  \"modifications\": {\n    \"avatar_video_url\": \"{{ $json.avatar_video_url || '' }}\",\n    \"image_1\": \"{{ $json.image_1 || '' }}\",\n    \"image_2\": \"{{ $json.image_2 || '' }}\",\n    \"image_3\": \"{{ $json.image_3 || '' }}\",\n    \"image_4\": \"{{ $json.image_4 || '' }}\",\n    \"image_5\": \"{{ $json.image_5 || '' }}\",\n    \"image_6\": \"{{ $json.image_6 || '' }}\",\n    \"image_7\": \"{{ $json.image_7 || '' }}\",\n    \"image_8\": \"{{ $json.image_8 || '' }}\",\n    \"image_9\": \"{{ $json.image_9 || '' }}\",\n    \"image_10\": \"{{ $json.image_10 || '' }}\",\n    \"text_1\": \"{{ $json.text_1 || '' }}\",\n    \"text_2\": \"{{ $json.text_2 || '' }}\",\n    \"text_3\": \"{{ $json.text_3 || '' }}\",\n    \"text_4\": \"{{ $json.text_4 || '' }}\",\n    \"text_5\": \"{{ $json.text_5 || '' }}\",\n    \"text_6\": \"{{ $json.text_6 || '' }}\",\n    \"text_7\": \"{{ $json.text_7 || '' }}\",\n    \"text_8\": \"{{ $json.text_8 || '' }}\",\n    \"text_9\": \"{{ $json.text_9 || '' }}\",\n    \"text_10\": \"{{ $json.text_10 || '' }}\",\n    \"broll_1\": \"{{ $json.broll_1 || '' }}\",\n    \"broll_2\": \"{{ $json.broll_2 || '' }}\",\n    \"broll_3\": \"{{ $json.broll_3 || '' }}\",\n    \"broll_4\": \"{{ $json.broll_4 || '' }}\",\n    \"audio_url\": \"{{ $json.audio_url || '' }}\",\n    \"expert_video_url\": \"{{ $json.expert_video_url || '' }}\"\n  }\n}","options":{}},"name":"Creatomate Render","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2640,0],"id":"creatomate-render","credentials":{"httpHeaderAuth":{"id":"QqD41oqOROB6DxXr","name":"Creatomate API"}}},{"parameters":{"jsCode":"// Extract render ID from Creatomate response\nconst response = $input.first().json;\nconst prevData = $('Prepare Render Data').first().json;\n\nreturn {\n  ...prevData,\n  render_id: response[0]?.id || response.id,\n  render_status: response[0]?.status || response.status\n};"},"name":"Parse Render Response","type":"n8n-nodes-base.code","typeVersion":2,"position":[2860,0],"id":"parse-render-response"},{"parameters":{"amount":30},"name":"Wait 30s","type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[3080,0],"webhookId":"wait-30s","id":"wait-30s"},{"parameters":{"url":"=https://api.creatomate.com/v1/renders/{{ $json.render_id }}","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","options":{}},"name":"Check Render Status","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[3300,0],"id":"check-render-status"},{"parameters":{"conditions":{"options":{"caseSensitive":false},"conditions":[{"id":"is-completed","leftValue":"={{ $json.status }}","rightValue":"succeeded","operator":{"type":"string","operation":"equals"}}]},"options":{}},"name":"Is Render Complete?","type":"n8n-nodes-base.if","typeVersion":2,"position":[3520,0],"id":"is-render-complete"},{"parameters":{"jsCode":"// Prepare data for cover generation\nconst renderResult = $input.first().json;\nconst prevData = $('Parse Render Response').first().json;\n\nreturn {\n  ...prevData,\n  final_video_url: renderResult.url,\n  render_status: 'succeeded'\n};"},"name":"Prepare Cover Generation","type":"n8n-nodes-base.code","typeVersion":2,"position":[3740,-100],"id":"prepare-cover-generation"},{"parameters":{"method":"POST","url":"https://api.ideogram.ai/generate","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"image_request\": {\n    \"prompt\": \"Instagram Reels cover thumbnail, bold white text '{{ $json.hook?.slice(0, 30) }}' centered, {{ $json.scenario_name }} style, vibrant colors, 1080x1920 vertical format, professional, eye-catching, no watermark\",\n    \"aspect_ratio\": \"ASPECT_9_16\",\n    \"model\": \"V_2\",\n    \"magic_prompt_option\": \"AUTO\"\n  }\n}","options":{}},"name":"Generate Cover (Ideogram)","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[3960,-100],"id":"generate-cover","credentials":{"httpHeaderAuth":{"id":"rrCVfNeSKnGe0r0G","name":"Ideogram API"}}},{"parameters":{"jsCode":"// Parse Ideogram response and combine with video data\nconst ideogramResponse = $input.first().json;\nconst prevData = $('Prepare Cover Generation').first().json;\n\nconst coverUrl = ideogramResponse.data?.[0]?.url || '';\n\nreturn {\n  ...prevData,\n  cover_url: coverUrl\n};"},"name":"Parse Cover Result","type":"n8n-nodes-base.code","typeVersion":2,"position":[4180,-100],"id":"parse-cover-result"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"={{ $env.GOOGLE_SHEET_ID }}","mode":"id"},"sheetName":{"__rl":true,"value":"Очередь_контента","mode":"name"},"columns":{"mappingMode":"defineBelow","value":{"id":"={{ $json.id }}","status":"video_ready"}},"options":{}},"name":"Update Content_Queue Status","type":"n8n-nodes-base.googleSheets","typeVersion":4.4,"position":[4400,-100],"id":"update-content-queue","credentials":{"googleSheetsOAuth2Api":{"id":"VYgLH1nyxvDHNqbF","name":"Google Sheets Main link"}}},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"={{ $env.GOOGLE_SHEET_ID }}","mode":"id"},"sheetName":{"__rl":true,"value":"Generated_Content","mode":"name"},"columns":{"mappingMode":"defineBelow","value":{"content_id":"={{ $json.id }}","video_url":"={{ $json.final_video_url }}","cover_url":"={{ $json.cover_url }}","template_id":"={{ $json.selected_template_id }}","scenario_name":"={{ $json.scenario_name }}","has_expert_footage":"={{ $json.expert_video_url ? 'TRUE' : 'FALSE' }}","has_subtitles":"FALSE","has_heygen":"={{ $json.avatar_video_url ? 'TRUE' : 'FALSE' }}","cost_claude":0.05,"cost_ideogram":0.88,"cost_heygen":"={{ $json.avatar_video_url ? 0.30 : 0 }}","cost_creatomate":0.25,"cost_total":"={{ 0.05 + 0.88 + ($json.avatar_video_url ? 0.30 : 0) + 0.25 }}","created_at":"={{ new Date().toISOString() }}"}},"options":{"useAppend":true}},"name":"Save to Generated_Content","type":"n8n-nodes-base.googleSheets","typeVersion":4.4,"position":[4400,100],"id":"save-generated-content","credentials":{"googleSheetsOAuth2Api":{"id":"VYgLH1nyxvDHNqbF","name":"Google Sheets Main link"}}},{"parameters":{"jsCode":"// Calculate costs: Claude + Ideogram x10 + HeyGen + Creatomate + Cover\nconst claudeCost = 0.05;\nconst ideogramSlidesCost = 0.08 * 10;\nconst ideogramCoverCost = 0.08;\nconst heygenCost = 0.30;\nconst creatomateCost = 0.25;\nconst totalCost = claudeCost + ideogramSlidesCost + ideogramCoverCost + heygenCost + creatomateCost;\n\nreturn {\n    timestamp: new Date().toISOString(),\n    service: 'multiple',\n    operation: 'ai_video_generation',\n    cost: totalCost,\n    details: JSON.stringify({\n        claude: claudeCost,\n        ideogram_slides: ideogramSlidesCost,\n        ideogram_cover: ideogramCoverCost,\n        heygen: heygenCost,\n        creatomate: creatomateCost,\n        content_id: $input.first().json.id || 'N/A'\n    })\n};"},"name":"Calculate API Costs","type":"n8n-nodes-base.code","typeVersion":2,"position":[4620,100],"id":"calculate-api-costs"},{"parameters":{"operation":"appendOrUpdate","sheetId":"={{ $env.GOOGLE_SHEET_ID }}","range":"API_Costs","options":{"cellFormat":"USER_ENTERED","useAppend":true},"columns":{"mappings":[{"fromColumn":"timestamp","toColumn":"timestamp"},{"fromColumn":"service","toColumn":"service"},{"fromColumn":"operation","toColumn":"operation"},{"fromColumn":"cost","toColumn":"cost"},{"fromColumn":"details","toColumn":"details"}]}},"name":"Save API Costs","type":"n8n-nodes-base.googleSheets","typeVersion":4,"position":[4840,100],"id":"save-api-costs","credentials":{"googleSheetsOAuth2Api":{"id":"VYgLH1nyxvDHNqbF","name":"Google Sheets Main link"}}},{"parameters":{"jsCode":"// Loop back to check status again\nconst prevData = $('Parse Render Response').first().json;\nreturn prevData;"},"name":"Loop Back","type":"n8n-nodes-base.code","typeVersion":2,"position":[3740,100],"id":"loop-back"}],"connections":{"Webhook Trigger":{"main":[[{"node":"Get Content Queue","type":"main","index":0},{"node":"Get AI Templates","type":"main","index":0}]]},"Get Content Queue":{"main":[[{"node":"Filter Ready Content","type":"main","index":0}]]},"Get AI Templates":{"main":[[{"node":"Select Template","type":"main","index":0}]]},"Filter Ready Content":{"main":[[{"node":"Select Template","type":"main","index":0}]]},"Select Template":{"main":[[{"node":"Generate Slide Content (Claude)","type":"main","index":0}]]},"Generate Slide Content (Claude)":{"main":[[{"node":"Parse Slides","type":"main","index":0}]]},"Parse Slides":{"main":[[{"node":"Generate Slide Images (Ideogram)","type":"main","index":0}]]},"Generate Slide Images (Ideogram)":{"main":[[{"node":"Combine Images","type":"main","index":0}]]},"Combine Images":{"main":[[{"node":"Generate HeyGen Avatar","type":"main","index":0},{"node":"Get B-Roll Files","type":"main","index":0},{"node":"Get Audio Files","type":"main","index":0},{"node":"Get Expert Clips","type":"main","index":0}]]},"Generate HeyGen Avatar":{"main":[[{"node":"Wait for HeyGen","type":"main","index":0}]]},"Get B-Roll Files":{"main":[[{"node":"Prepare Render Data","type":"main","index":0}]]},"Get Audio Files":{"main":[[{"node":"Prepare Render Data","type":"main","index":0}]]},"Get Expert Clips":{"main":[[{"node":"Prepare Render Data","type":"main","index":0}]]},"Wait for HeyGen":{"main":[[{"node":"Check HeyGen Status","type":"main","index":0}]]},"Check HeyGen Status":{"main":[[{"node":"Prepare Render Data","type":"main","index":0}]]},"Prepare Render Data":{"main":[[{"node":"Creatomate Render","type":"main","index":0}]]},"Creatomate Render":{"main":[[{"node":"Parse Render Response","type":"main","index":0}]]},"Parse Render Response":{"main":[[{"node":"Wait 30s","type":"main","index":0}]]},"Wait 30s":{"main":[[{"node":"Check Render Status","type":"main","index":0}]]},"Check Render Status":{"main":[[{"node":"Is Render Complete?","type":"main","index":0}]]},"Is Render Complete?":{"main":[[{"node":"Prepare Cover Generation","type":"main","index":0}],[{"node":"Loop Back","type":"main","index":0}]]},"Prepare Cover Generation":{"main":[[{"node":"Generate Cover (Ideogram)","type":"main","index":0}]]},"Generate Cover (Ideogram)":{"main":[[{"node":"Parse Cover Result","type":"main","index":0}]]},"Parse Cover Result":{"main":[[{"node":"Update Content_Queue Status","type":"main","index":0},{"node":"Save to Generated_Content","type":"main","index":0}]]},"Update Content_Queue Status":{"main":[[{"node":"Calculate API Costs","type":"main","index":0}]]},"Save to Generated_Content":{"main":[[{"node":"Calculate API Costs","type":"main","index":0}]]},"Calculate API Costs":{"main":[[{"node":"Save API Costs","type":"main","index":0}]]},"Loop Back":{"main":[[{"node":"Wait 30s","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","availableInMCP":false},"staticData":null,"meta":null,"pinData":{},"versionId":"e3587452-7e05-444b-8790-19dddbee5a06","versionCounter":7,"triggerCount":0,"shared":[{"updatedAt":"2025-12-24T14:19:37.959Z","createdAt":"2025-12-24T14:19:37.959Z","role":"workflow:owner","workflowId":"HuSjIsQg1xIpaseF","projectId":"RBPPu9AATeVK4CWS","project":{"updatedAt":"2025-09-12T08:23:30.032Z","createdAt":"2025-04-06T11:26:22.366Z","id":"RBPPu9AATeVK4CWS","name":"Ruslan 111 <105ford329@gmail.com>","type":"personal","icon":null,"description":null,"projectRelations":[{"updatedAt":"2025-04-06T11:26:22.366Z","createdAt":"2025-04-06T11:26:22.366Z","userId":"857820b0-f530-430a-b69c-96a0ec14e554","projectId":"RBPPu9AATeVK4CWS","user":{"updatedAt":"2026-01-15T07:57:19.897Z","createdAt":"2025-04-06T11:26:21.157Z","id":"857820b0-f530-430a-b69c-96a0ec14e554","email":"105ford329@gmail.com","firstName":"Ruslan","lastName":"111","personalizationAnswers":null,"settings":{"userActivated":true,"easyAIWorkflowOnboarded":true,"firstSuccessfulWorkflowId":"28ntO5KaE2bWGofZ","userActivatedAt":1746260344700,"npsSurvey":{"responded":true,"lastShownAt":1762343016289},"dismissedCallouts":{"preBuiltAgentsCalloutTelegram":true}},"disabled":false,"mfaEnabled":false,"lastActiveAt":"2026-01-14","isPending":false}}]}}],"tags":[]}